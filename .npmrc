# NPM Configuration optimisée pour CI/CD
# Éviter les erreurs 429 ("Too Many Requests")

package-manager=pnpm

# === RETRY & TIMEOUT CONFIGURATION ===
# Augmente le nombre de retry en cas d'échec
fetch-retry-mintimeout=2000
fetch-retry-maxtimeout=60000
fetch-retry-factor=10
fetch-retries=5

# Timeouts plus généreux
fetch-timeout=120000
timeout=120000

# === CACHE CONFIGURATION ===
# Force l'utilisation du cache local quand possible
prefer-offline=true
cache-min=86400

# === CONCURRENT DOWNLOADS ===
# Limite les téléchargements concurrents pour éviter de surcharger NPM
maxsockets=5
network-concurrency=3

# === LOGGING ===
# Logs détaillés pour debugging en cas de problème
loglevel=warn

# === PNPM SPECIFIC ===
# Configuration spécifique pour pnpm en CI
store-dir=.pnpm-store
verify-store-integrity=false
package-import-method=copy

# === SECURITY ===
# Évite les warnings de security audit qui peuvent ralentir
audit-level=high
fund=false

# === CI OPTIMIZATION ===
# Optimisations spécifiques pour environnement CI
progress=false
prefer-frozen-lockfile=true
// Custom Theming for Angular Material
// For more information: https://material.angular.io/guide/theming
@use "@angular/material" as mat;
@use "sass:meta";
@use "./variables";
@use "./app/styles/themes/_theme-colors.scss" as theme;

// Product Tour
@import "driver.js/dist/driver.css";
@import "./app/core/product-tour/product-tour.css";

html {
  color-scheme: light dark;
  @include mat.theme(
    (
      color: (
        primary: theme.$primary-palette,
        tertiary: theme.$tertiary-palette,
      ),
      // typography: Roboto,
      typography: (
          plain-family: #{meta.inspect(variables.$regular-font-family)},
          brand-family: #{meta.inspect(variables.$heading-font-family)},
        ),
      density: 0,
    )
  );
}

html {
  width: 100%;
  // Desktop: prevent document scroll (content scrolls inside mat-sidenav-content)
  @media (min-width: 600px) {
    overflow: hidden;
  }
  // Mobile: no overflow set → body's overflow propagates to viewport (per CSS spec)
}

body {
  margin: 0;
  overflow-x: hidden;
  max-width: 100vw;
  // Mobile: body-level scroll enables iOS Safari toolbar translucency
  // and Android Chrome/Samsung/Firefox navbar auto-hide
  @media (min-width: 600px) {
    height: 100%;
    overflow-y: hidden;
  }
  font-family:
    var(--mat-sys-typescale-body-medium-font-family-name), Poppins,
    "Helvetica Neue", sans-serif;
  background: var(--mat-sys-surface);
  color: var(--mat-sys-on-surface);
  font-size: var(--mat-sys-typescale-body-medium-size);
  line-height: var(--mat-sys-typescale-body-medium-line-height);
}

// Pulpe brand gradient - electric DA: vivid blue → neon emerald → bright green → lime pop
:root {
  --pulpe-gradient-start: #009bff;
  --pulpe-gradient-mid1: #00edab;
  --pulpe-gradient-mid2: #30e868;
  --pulpe-gradient-end: #8fff6b;
}

@media (prefers-color-scheme: dark) {
  :root {
    --pulpe-gradient-start: #003d7a;
    --pulpe-gradient-mid1: #006b4e;
    --pulpe-gradient-mid2: #0d7a30;
    --pulpe-gradient-end: #2ba84a;
  }
}

.pulpe-gradient {
  background: linear-gradient(
    135deg,
    var(--pulpe-gradient-start) 0%,
    var(--pulpe-gradient-mid1) 33%,
    var(--pulpe-gradient-mid2) 66%,
    var(--pulpe-gradient-end) 100%
  );
}

// Budget section group - Material expansion panel overrides
// Scoped via host class to avoid ViewEncapsulation issues
.pulpe-budget-section-group {
  .mat-expansion-panel-body {
    padding: 0 !important;
  }

  .mat-expansion-panel-header {
    padding: 0 16px !important;
  }
}

// Side sheet dialog panel - slides from right edge
.side-sheet-panel {
  position: fixed !important;
  right: 0 !important;
  top: env(safe-area-inset-top) !important;
  margin: 0 !important;
  max-height: calc(
    100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom)
  ) !important;
  border-radius: 0 !important;

  .mat-mdc-dialog-container,
  .mat-mdc-dialog-surface {
    border-radius: 16px 0 0 16px !important;
  }

  animation: pulpe-slide-in-right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

// Keyframes - declared at root level with pulpe- prefix to avoid collisions
@keyframes pulpe-slide-in-right {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

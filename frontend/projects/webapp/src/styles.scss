// Custom Theming for Angular Material
// For more information: https://material.angular.io/guide/theming
@use "@angular/material" as mat;
@use "sass:meta";
@use "./variables";
@use "./app/styles/themes/_theme-colors.scss" as theme;

// Product Tour
@import "driver.js/dist/driver.css";
@import "./app/core/product-tour/product-tour.css";

html {
  color-scheme: light dark;
  @include mat.theme(
    (
      color: (
        primary: theme.$primary-palette,
        tertiary: theme.$tertiary-palette,
      ),
      // typography: Roboto,
      typography: (
          plain-family: #{meta.inspect(variables.$regular-font-family)},
          brand-family: #{meta.inspect(variables.$heading-font-family)},
        ),
      density: 0,
    )
  );
}

html {
  overflow: hidden;
  width: 100%;
}

body {
  height: 100%;
  margin: 0;
  // Enable mobile browser navbar auto-hide on scroll (Android Chrome/Samsung Browser)
  // position: fixed + overflow-y: scroll allows browser to detect scroll gestures
  position: fixed;
  width: 100%;
  overflow-y: scroll;
  overflow-x: hidden;
  max-width: 100vw;
  font-family:
    var(--mat-sys-typescale-body-medium-font-family-name), Poppins,
    "Helvetica Neue", sans-serif;
  background: var(--mat-sys-surface);
  color: var(--mat-sys-on-surface);
  font-size: var(--mat-sys-typescale-body-medium-size);
  line-height: var(--mat-sys-typescale-body-medium-line-height);
}

// Pulpe brand gradient - CSS variables for theme support
:root {
  // Version SATURÉE à fond de ta palette
  --pulpe-gradient-0: #0088ff; // bleu survitaminé
  --pulpe-gradient-33: #00ddaa; // turquoise punch
  --pulpe-gradient-66: #00ff55; // vert néon
  --pulpe-gradient-100: #88ff44; // vert lime électrique
}

@media (prefers-color-scheme: dark) {
  :root {
    // Dark theme gradient - gris sombre avec touches de vert
    --pulpe-gradient-0: #1a1a1a; // gris très sombre
    --pulpe-gradient-33: #1e2820; // gris-vert foncé
    --pulpe-gradient-66: #00531a; // vert primary moyen (30)
    --pulpe-gradient-100: #2b883b; // vert primary plus clair (50)
  }
}

// Pulpe brand gradient
.pulpe-gradient {
  background: linear-gradient(
    135deg,
    var(--pulpe-gradient-0) 0%,
    var(--pulpe-gradient-33) 33%,
    var(--pulpe-gradient-66) 66%,
    var(--pulpe-gradient-100) 100%
  );
}

// Budget section group - Material expansion panel overrides
// Scoped via host class to avoid ViewEncapsulation issues
.pulpe-budget-section-group {
  .mat-expansion-panel-body {
    padding: 0 !important;
  }

  .mat-expansion-panel-header {
    padding: 0 16px !important;
  }
}

// Side sheet dialog panel - slides from right edge
.side-sheet-panel {
  position: fixed !important;
  right: 0 !important;
  top: 0 !important;
  margin: 0 !important;
  max-height: 100vh !important;
  border-radius: 0 !important;

  .mat-mdc-dialog-container,
  .mat-mdc-dialog-surface {
    border-radius: 16px 0 0 16px !important;
  }

  animation: pulpe-slide-in-right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

// Keyframes - declared at root level with pulpe- prefix to avoid collisions
@keyframes pulpe-slide-in-right {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

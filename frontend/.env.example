# Variables d'environnement pour l'application Pulpe
# Ce fichier sert de template - copiez-le vers .env et personnalisez les valeurs

# === ENVIRONNEMENT D'APPLICATION ===
# Environnement de déploiement (développement/production/local/test)
# - development: Environnement de développement avec logs détaillés
# - production: Environnement de production optimisé
# - local: Développement local avec services locaux
# - test: Environnement de test (E2E, CI/CD)
PUBLIC_ENVIRONMENT=local

# === CONFIGURATION SUPABASE ===
# URL de l'API Supabase - URL de votre projet Supabase
# Local (développement): http://localhost:54321
# Production: https://[votre-projet].supabase.co
PUBLIC_SUPABASE_URL=http://localhost:54321

# Clé anonyme Supabase - permet l'accès public à l'API
# Cette clé est safe côté client, elle respecte les politiques RLS
# Local: clé par défaut fournie par Supabase CLI
# Production: récupérable depuis le dashboard Supabase
PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0

# === CONFIGURATION BACKEND ===
# URL de l'API backend NestJS - point d'entrée pour les appels API
# Local: http://localhost:3000/api/v1
# Production: https://api.mondomaine.com/api/v1
PUBLIC_BACKEND_API_URL=http://localhost:3000/api/v1

# === CONFIGURATION POSTHOG (ANALYTICS) ===
# Clé API PostHog - identifiant de votre projet d'analytics
# Format requis: phc_xxxxxxxxxxxxxxxxxxxxxxxxx
# Récupérable depuis le dashboard PostHog > Settings > API Keys
PUBLIC_POSTHOG_API_KEY=phc_your_api_key_here

# URL d'hébergement PostHog - serveur qui traite les analytics
# EU: https://eu.i.posthog.com (RGPD compliant)
# US: https://us.i.posthog.com
# Self-hosted: https://analytics.mondomaine.com
PUBLIC_POSTHOG_HOST=https://eu.i.posthog.com

# Activation globale de PostHog (true/false)
# false: Désactive complètement les analytics (recommandé en dev/test)
# true: Active les analytics selon les autres paramètres
PUBLIC_POSTHOG_ENABLED=false

# === FONCTIONNALITÉS POSTHOG ===
# Capture automatique des pages vues (true/false)
# Recommandé: true en production, false en développement
PUBLIC_POSTHOG_CAPTURE_PAGEVIEWS=true

# Capture automatique des fermetures de pages (true/false)
# Utilisé pour calculer le temps passé sur les pages
PUBLIC_POSTHOG_CAPTURE_PAGELEAVES=true

# === ENREGISTREMENT DE SESSION ===
# Activation de l'enregistrement des sessions utilisateur (true/false)
# ATTENTION: Impact performance et confidentialité - à utiliser avec parcimonie
PUBLIC_POSTHOG_SESSION_RECORDING_ENABLED=false

# Masquage automatique des champs de saisie (true/false)
# true: Masque mots de passe, emails, etc. (recommandé pour la sécurité)
# false: Enregistre tout le contenu (risque de confidentialité)
PUBLIC_POSTHOG_MASK_INPUTS=true

# Taux d'échantillonnage pour l'enregistrement (0.0 à 1.0)
# 0.1 = 10% des sessions enregistrées
# 1.0 = toutes les sessions (attention aux coûts et performances)
# 0.0 = aucune session
PUBLIC_POSTHOG_SAMPLE_RATE=0.1

# Mode debug PostHog (true/false)
# true: Affiche les logs détaillés dans la console (développement uniquement)
# false: Mode silencieux (production)
PUBLIC_POSTHOG_DEBUG=false

# === SOURCEMAPS UPLOAD (CI/CD UNIQUEMENT) ===
# Clé API personnelle PostHog pour l'upload des sourcemaps
# ATTENTION: Cette clé est DIFFÉRENTE de PUBLIC_POSTHOG_API_KEY
# Elle permet l'upload des Symbol Sets pour le error tracking
# Récupérable depuis: PostHog Dashboard > Settings > Personal API Keys
# OBLIGATOIRE en CI/CD pour activer l'upload automatique
POSTHOG_PERSONAL_API_KEY=phc_your_personal_api_key_here

# URL de l'instance PostHog pour l'upload des sourcemaps
# DOIT correspondre à PUBLIC_POSTHOG_HOST
# EU: https://eu.i.posthog.com (RGPD compliant)
# US: https://us.i.posthog.com
# Self-hosted: https://analytics.mondomaine.com
POSTHOG_HOST=https://eu.i.posthog.com

# === INSTRUCTIONS D'UTILISATION ===
#
# 1. CONFIGURATION LOCALE (développement)
#    - Copiez ce fichier vers .env
#    - Gardez les valeurs par défaut pour Supabase local
#    - Définissez PUBLIC_POSTHOG_ENABLED=false
#    - Ajustez PUBLIC_BACKEND_API_URL si nécessaire
#
# 2. CONFIGURATION DE TEST (E2E)
#    - Utilisez .env.e2e avec toutes ces variables
#    - PUBLIC_ENVIRONMENT=test
#    - PUBLIC_POSTHOG_ENABLED=false
#    - Clé PostHog factice: phc_fake_key_for_e2e_tests_only
#
# 3. CONFIGURATION PRODUCTION
#    - Variables sensibles via CI/CD (GitHub Secrets, Vercel Environment Variables)
#    - PUBLIC_ENVIRONMENT=production
#    - Clés Supabase et PostHog de production
#    - PUBLIC_POSTHOG_ENABLED=true
#    - POSTHOG_PERSONAL_API_KEY pour l'upload automatique des sourcemaps
#
# 4. VALIDATION
#    - Toutes les variables sont REQUISES (pas de valeurs par défaut)
#    - Le script generate-config.js valide la configuration au démarrage
#    - Erreurs claires si une variable manque ou est invalide
#
# === SÉCURITÉ ===
# - Ne commitez JAMAIS ce fichier avec de vraies clés de production
# - Les variables PUBLIC_* sont exposées côté client (non sensibles)
# - Les clés Supabase anon et PostHog API sont conçues pour être publiques
# - La sécurité repose sur les politiques RLS (Supabase) et la configuration PostHog
# Variables d'environnement - Frontend Pulpe
# Copiez ce fichier vers .env et personnalisez les valeurs

# === ENVIRONNEMENT ===
# Valeurs: development | production | preview | local | test
PUBLIC_ENVIRONMENT=local

# === SUPABASE ===
# URL API Supabase - Local: http://localhost:54321 | Production: https://[projet].supabase.co
PUBLIC_SUPABASE_URL=http://localhost:54321

# Clé anonyme Supabase (safe côté client, RLS appliqué)
# Local: clé par défaut Supabase CLI | Production: dashboard Supabase
PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0

# === BACKEND ===
# URL API NestJS - Local: http://localhost:3000/api/v1
PUBLIC_BACKEND_API_URL=http://localhost:3000/api/v1

# === ANALYTICS (POSTHOG) ===
# Clé API PostHog (format: phc_xxx) - Dashboard PostHog > Settings > API Keys
PUBLIC_POSTHOG_API_KEY=phc_your_api_key_here

# Serveur PostHog - EU (RGPD): https://eu.i.posthog.com | US: https://us.i.posthog.com
PUBLIC_POSTHOG_HOST=https://eu.i.posthog.com

# Activation globale (false en dev/test, true en prod/preview)
PUBLIC_POSTHOG_ENABLED=false

# Capture automatique des pages vues (true recommandé en production)
PUBLIC_POSTHOG_CAPTURE_PAGEVIEWS=true

# Capture des fermetures de pages (calcul du temps passé)
PUBLIC_POSTHOG_CAPTURE_PAGELEAVES=true

# Enregistrement de session (attention: impact perf et vie privée)
PUBLIC_POSTHOG_SESSION_RECORDING_ENABLED=false

# Masquage automatique des inputs sensibles (recommandé: true)
PUBLIC_POSTHOG_MASK_INPUTS=true

# Taux d'échantillonnage sessions (0.0 à 1.0) - 0.1 = 10% des sessions
PUBLIC_POSTHOG_SAMPLE_RATE=0.1

# Mode debug (logs console, développement uniquement)
PUBLIC_POSTHOG_DEBUG=false

# === SOURCEMAPS (CI/CD UNIQUEMENT) ===
# Clé API personnelle PostHog (DIFFÉRENTE de PUBLIC_POSTHOG_API_KEY)
# Dashboard PostHog > Settings > Personal API Keys
POSTHOG_PERSONAL_API_KEY=phc_your_personal_api_key_here

# Doit correspondre à PUBLIC_POSTHOG_HOST
POSTHOG_HOST=https://eu.i.posthog.com

# ID du projet PostHog (nombre entier) - Dashboard > Settings > Project variables
POSTHOG_CLI_ENV_ID=your_project_id_here

# === ANTI-BOT (TURNSTILE) ===
# Clé site Cloudflare Turnstile - Clé de test (0x...) ou production
PUBLIC_TURNSTILE_SITE_KEY=0x4AAAAAAB46FJOy2Xtrp9V6

# === INSTRUCTIONS ===
#
# LOCAL (développement)
#   - Copiez ce fichier → .env
#   - Gardez les valeurs par défaut
#
# TEST (E2E)
#   - PUBLIC_ENVIRONMENT=test
#   - PUBLIC_POSTHOG_ENABLED=false
#
# PREVIEW (pré-production)
#   - PUBLIC_ENVIRONMENT=preview
#   - Variables via Vercel/Railway dashboards
#   - Supabase branche Preview
#
# PRODUCTION
#   - PUBLIC_ENVIRONMENT=production
#   - Variables via Vercel/Railway dashboards
#   - Toutes les clés de production
#
# VALIDATION
#   - Toutes les variables sont REQUISES
#   - Le script generate-config.ts valide au démarrage
#   - Erreurs claires si invalide ou manquante
#
# SÉCURITÉ
#   - Ne commitez JAMAIS de vraies clés de production
#   - Les variables PUBLIC_* sont exposées côté client (non sensibles)
#   - Sécurité: RLS Supabase + configuration PostHog
